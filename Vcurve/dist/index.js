"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){"function"==typeof define&&define.amd?define(e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.Curve=e()}(void 0,function(){var t=new String(function(){});t=t.substring(t.indexOf("/*")+3,t.lastIndexOf("*/")),console.log("%c"+t,"color:#f00;");for(var o=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];function r(t){return"number"==typeof t}function i(t){if(_classCallCheck(this,i),this.rafId=null,this.paused=!1,this.theNum=0,this.progress=0,this.duration=1e3*Number(t.duration)||1e3,this.starNum=Number(t.starNum)||0,this.endNum=Number(t.endNum)||1e3,this.reductionGear=void 0===t.reductionGear||t.reductionGear,this.toFixed=Number(t.toFixed)||2,this.startCb=null,this.starNum==this.endNum)throw new Error("开始和结束数值不能为同一个")}return window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-o)),r=window.setTimeout(function(){t(n+i)},i);return o=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),_createClass(i,[{key:"start",value:function(t){var e=this.duration,n=this.starNum,i=this.endNum;if(this.rafId,!(r(e)&&r(n)&&r(i)))throw new Error("duration、starNum，endNum 必须为纯数字，类型可以为number  string");this.startCb=t,this.step(e,n,i,t)}},{key:"update",value:function(t,e){var n=this.duration,i=this.theNum;if(this.rafId,void 0!==e&&"function"!=typeof e)throw new Error("update的回调函数必须为函数，或者你不传");e=e||this.startCb,this.step(n,i,t,e)}},{key:"pause",value:function(){var t=this.paused,e=this.rafId,n=this.reductionGear,i=this.duration,r=this.progress,o=this.theNum,a=this.endNum,s=this.startCb;return t?(this.paused=!1,i=n?i:i-r,this.step(i,o,a,s,r)):(this.paused=!0,window.cancelAnimationFrame(e)),{theNum:o,progress:r,paused:this.paused}}},{key:"step",value:function(n,i,r,o,a){var s=this,u=null,d=void 0,m=void 0,c=void 0,h=(this.rafId,this.reductionGear);c=window.requestAnimationFrame(function t(e){window.cancelAnimationFrame(c),u=u||e,s.progress=e-u,(m=s.progress+(a||0))!==a&&(d=Math.min(Math.abs(r-i)*(h?(1-Math.pow(2,-10*s.progress/n))*(1/(1-Math.pow(2,-10))):s.progress/n),Math.abs(r-i)),s.theNum=Number((r<i?i-d:i+d).toFixed(s.toFixed)),o&&o(s.theNum,m/1e3)),s.progress<n&&(c=window.requestAnimationFrame(t),s.rafId=c)}),this.rafId=c}}]),i});